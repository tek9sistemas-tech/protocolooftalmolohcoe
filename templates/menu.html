{% extends "base.html" %}
{% block content %}
<div class="card p-4 shadow-sm">
  <div class="d-flex justify-content-between align-items-center">
    <h4 class="mb-0">Menu</h4>
    <a class="btn btn-outline-danger" href="{{ url_for('logout') }}">Sair</a>
  </div>

  <hr>

  <a class="btn btn-primary btn-lg w-100 mb-3" href="{{ url_for('novo_paciente') }}">
    + Novo paciente
  </a>

  <h6 class="mb-2">Buscar paciente</h6>
  <form method="get" action="{{ url_for('menu') }}">
    <div class="input-group">
      <input name="q" class="form-control" placeholder="Digite nome ou telefone" value="{{ q or '' }}">
      <button class="btn btn-outline-primary">Buscar</button>
    </div>
  </form>

  {% if pacientes is not none %}
    <div class="mt-3">
      {% if pacientes|length == 0 %}
        <div class="alert alert-warning mb-0">Nenhum paciente encontrado.</div>
      {% else %}
        <div class="list-group">
          {% for p in pacientes %}
            <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
               href="{{ url_for('protocolo', paciente_id=p.id) }}">
              <div>
                <div class="fw-bold">{{ p.nome }}</div>
                <div class="small text-muted">
                  Tel: {{ p.telefone or "-" }} â€¢ DN: {{ p.dn }}
                </div>
              </div>
              <span class="badge text-bg-secondary">Abrir</span>
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  {% endif %}
</div>
{% endblock %}
